from typing import Iterator

from src.generate import generate_users


def main(cnt_generate_user: int) -> None:
    """
    Генерирует список пользователей и выводит его в консоль.

    Функция запрашивает у пользователя списки имен, фамилий и городов,
    затем генерирует указанное количество пользователей и выводит результат.

    Параметры:
        cnt_generate_user (int): Количество пользователей для генерации

    Возвращает:
        None: Функция не возвращает значения, только выводит результат в консоль

    Исключения:
        ValueError: Если не введены обязательные параметры (имена, фамилии или города)

    Особенности:
        - Ввод данных осуществляется через консоль
        - Разделитель элементов ввода - запятая
        - Для генерации используется функция generate_users()
        - Результат сохраняется в списке и выводится в консоль

    Пример использования:
        >>> main(3)
        Введите имена пользователей через запятую: Иван,Петр
        Введите фамилии пользователей через запятую: Иванов,Петров
        Введите названия городов через запятую: Москва,Санкт-Петербург
        [<генератор1>, <генератор2>, <генератор3>]
    """
    # Запрашиваем у пользователя исходные данные для генерации
    first_names: str = input("Введите имена пользователей через запятую")
    last_names: str = input("Введите фамилии пользователей через запятую")
    cities: str = input("Введите названия городов через запятую")

    # Проверяем, что все параметры введены
    if None in (first_names, last_names, cities):
        raise ValueError("Не введены параметры пользователя")

    # Разбиваем введенные строки на списки по запятым
    first_names_split: list = first_names.split(",")
    last_names_split: list = last_names.split(",")
    cities_split: list = cities.split(",")

    # Создаем пустой список для хранения результатов генерации
    generated_users: list = []

    # Генерируем указанное количество пользователей
    for cnt in range(cnt_generate_user):
        # Создаем генератор пользователей с текущими параметрами
        generator: Iterator[dict] = generate_users(first_names_split, last_names_split, cities_split)
        # Добавляем генератор в результирующий список
        generated_users.append(generator)

    # Выводим результат в консоль
    print(generated_users)

    return None
